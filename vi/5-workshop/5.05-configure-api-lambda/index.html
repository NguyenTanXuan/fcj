<!DOCTYPE html>
<html lang="vi" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.134.3">
    <meta
  name="description"
  content=""
/>
<meta name="author" content="thienlh@thienlu.com" />

    <link rel="icon" href="../../../images/favicon.png" type="image/png">

    <title>Cấu hình API &amp; Lambda :: Báo cáo thực tập</title>

    
    <link href="../../../css/nucleus.css?1765314152" rel="stylesheet">
    <link href="../../../css/fontawesome-all.min.css?1765314152" rel="stylesheet">
    <link href="../../../css/hybrid.css?1765314152" rel="stylesheet">
    <link href="../../../css/featherlight.min.css?1765314152" rel="stylesheet">
    <link href="../../../css/perfect-scrollbar.min.css?1765314152" rel="stylesheet">
    <link href="../../../css/auto-complete.css?1765314152" rel="stylesheet">
    <link href="../../../css/atom-one-dark-reasonable.css?1765314152" rel="stylesheet">
    <link href="../../../css/theme.css?1765314152" rel="stylesheet">
    <link href="../../../css/hugo-theme.css?1765314152" rel="stylesheet">
    
    <link href="../../../css/theme-workshop.css?1765314152" rel="stylesheet">
    
    

    <script src="../../../js/jquery-3.3.1.min.js?1765314152"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    

  </head>
  <body class="" data-url="../../../vi/5-workshop/5.05-configure-api-lambda/">
    <nav
  id="sidebar"
  class="showVisitedLinks"
>
   
  <div id="header-wrapper">
    <div id="header"><a id="logo" href="../../../">
  <svg
    id="Layer_1"
    data-name="Layer 1"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 60 30"
    width="30%"
  >
    <defs>
      <style>
        .cls-1 {
          fill: #fff;
        }
        .cls-2 {
          fill: #f90;
          fill-rule: evenodd;
        }
      </style>
    </defs>
    <title>AWS-Logo_White-Color</title>
    <path
      class="cls-1"
      d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"
    ></path>
    <path
      class="cls-2"
      d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"
    ></path>
    <path
      class="cls-2"
      d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"
    ></path>
  </svg>
</a>
</div>
     <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../../../js/lunr.min.js?1765314152"></script>
<script type="text/javascript" src="../../../js/auto-complete.js?1765314152"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/nguyentanxuan.github.io\/fcj\/\/vi";
    
</script>
<script type="text/javascript" src="../../../js/search.js?1765314152"></script>
 
  </div>

  <div class="highlightable">
    <ul class="topics">
               
<li
  data-nav-id="/vi/1-worklog/"
  title="Nhật ký công việc"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/">
     <b> 1. </b> Nhật ký công việc 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
  <ul>
          
            
<li
  data-nav-id="/vi/1-worklog/1.1-week1/"
  title="Worklog Tuần 1"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.1-week1/">
     <b> 1.1. </b> Worklog Tuần 1 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.2-week2/"
  title="Worklog Tuần 2"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.2-week2/">
     <b> 1.2. </b> Worklog Tuần 2 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.3-week3/"
  title="Worklog Tuần 3"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.3-week3/">
     <b> 1.3. </b> Worklog Tuần 3 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.4-week4/"
  title="Worklog Tuần 4"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.4-week4/">
     <b> 1.4. </b> Worklog Tuần 4 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.5-week5/"
  title="Worklog Tuần 5"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.5-week5/">
     <b> 1.5. </b> Worklog Tuần 5 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.6-week6/"
  title="Worklog Tuần 6"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.6-week6/">
     <b> 1.6. </b> Worklog Tuần 6 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.7-week7/"
  title="Worklog Tuần 7"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.7-week7/">
     <b> 1.7. </b> Worklog Tuần 7 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.8-week8/"
  title="Worklog tuần 8"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.8-week8/">
     <b> 1.8. </b> Worklog tuần 8 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.9-week9/"
  title="Worklog Tuần 9"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.9-week9/">
     <b> 1.9. </b> Worklog Tuần 9 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.10-week10/"
  title="Worklog Tuần 10"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.10-week10/">
     <b> 1.10. </b> Worklog Tuần 10 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.11-week11/"
  title="Worklog tuần 11"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.11-week11/">
     <b> 1.11. </b> Worklog tuần 11 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/1-worklog/1.12-week12/"
  title="Worklog Tuần 12"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/1-worklog/1.12-week12/">
     <b> 1.12. </b> Worklog Tuần 12 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
     
  </ul>
  
</li>
           
<li
  data-nav-id="/vi/2-proposal/"
  title="Bản đề xuất"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/2-proposal/">
     <b> 2. </b> Bản đề xuất 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
           
<li
  data-nav-id="/vi/3-blogstranslated/"
  title="Các bài blogs đã dịch"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/3-blogstranslated/">
     <b> 3. </b> Các bài blogs đã dịch 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
  <ul>
          
            
<li
  data-nav-id="/vi/3-blogstranslated/3.1-blog1/"
  title="Blog 1"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/3-blogstranslated/3.1-blog1/">
     <b> 3.1. </b> Blog 1 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/3-blogstranslated/3.2-blog2/"
  title="Blog 2"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/3-blogstranslated/3.2-blog2/">
     <b> 3.2. </b> Blog 2 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/3-blogstranslated/3.3-blog3/"
  title="Blog 3"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/3-blogstranslated/3.3-blog3/">
     <b> 3.3. </b> Blog 3 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
     
  </ul>
  
</li>
           
<li
  data-nav-id="/vi/4-eventparticipated/"
  title="Các events đã tham gia"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/4-eventparticipated/">
     <b> 4 </b> Các events đã tham gia 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
  <ul>
          
            
<li
  data-nav-id="/vi/4-eventparticipated/4.1-event1/"
  title="Event 1"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/4-eventparticipated/4.1-event1/">
     <b> 4.1. </b> Event 1 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/4-eventparticipated/4.2-event2/"
  title="Event 2"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/4-eventparticipated/4.2-event2/">
     <b> 4.2. </b> Event 2 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/4-eventparticipated/4.3-event3/"
  title="Event 2"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/4-eventparticipated/4.3-event3/">
     <b> 4.3 </b> Event 2 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
     
  </ul>
  
</li>
           
<li
  data-nav-id="/vi/5-workshop/"
  title="Workshop"
  class="dd-item 
        parent
        
        
        "
>
  <a href="../../../vi/5-workshop/">
     <b> 5. </b> Workshop 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
  <ul>
          
            
<li
  data-nav-id="/vi/5-workshop/5.01-workshop-overview/"
  title="Tổng quan Workshop"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.01-workshop-overview/">
     <b> 5.01. </b> Tổng quan Workshop 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.02-setup-environment/"
  title="Thiết lập Môi trường"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.02-setup-environment/">
     <b> 5.02. </b> Thiết lập Môi trường 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.03-cdk-bootstrap/"
  title="CDK Bootstrap"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.03-cdk-bootstrap/">
     <b> 5.03. </b> CDK Bootstrap 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.04-configure-stacks/"
  title="Cấu hình các Infrastructure Stack"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.04-configure-stacks/">
     <b> 5.04. </b> Cấu hình các Infrastructure Stack 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.05-configure-api-lambda/"
  title="Cấu hình API &amp; Lambda"
  class="dd-item 
        
        active
        
        "
>
  <a href="../../../vi/5-workshop/5.05-configure-api-lambda/">
     <b> 5.06. </b> Cấu hình API &amp; Lambda 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.06-deploy-backend/"
  title="Triển khai Backend Services"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.06-deploy-backend/">
     <b> 5.07. </b> Triển khai Backend Services 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.07-test-endpoints/"
  title="Kiểm Tra Endpoints Toàn Diện"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.07-test-endpoints/">
     <b> 5.08. </b> Kiểm Tra Endpoints Toàn Diện 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.08-push-gitlab/"
  title="Push lên GitLab"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.08-push-gitlab/">
     <b> 5.09. </b> Push lên GitLab 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
            
<li
  data-nav-id="/vi/5-workshop/5.09-cleanup/"
  title="Dọn dẹp tài nguyên"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/5-workshop/5.09-cleanup/">
     <b> 5.11. </b> Dọn dẹp tài nguyên 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
     
  </ul>
  
</li>
           
<li
  data-nav-id="/vi/6-self-evaluation/"
  title="Tự đánh giá"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/6-self-evaluation/">
     <b> 6. </b> Tự đánh giá 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
           
<li
  data-nav-id="/vi/7-feedback/"
  title="Sharing and Feedback"
  class="dd-item 
        
        
        
        "
>
  <a href="../../../vi/7-feedback/">
     <b> 7. </b> Sharing and Feedback 
    <i class="fas fa-check read-icon"></i>
    
  </a>
   
</li>
    
    </ul>

     
    <section id="shortcuts">
      <h3>
        More
      </h3>
      <ul>
        
        <li>
          <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"
            ><i class='fab fa-facebook'></i> AWS Study Group</a
          >
        </li>
        
      </ul>
    </section>
     
    <section id="prefooter">
      <hr />
      <ul>
        
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
            <div class="select-style">
              <select id="select-language" onchange="location = this.value;">
                       
                <option
                  id="en"
                  value="https://nguyentanxuan.github.io/fcj/5-workshop/5.05-configure-api-lambda/"
                >
                  English
                </option>
                            
                <option
                  id="vi"
                  value="https://nguyentanxuan.github.io/fcj/vi/5-workshop/5.05-configure-api-lambda/"
                  selected
                >
                  Tiếng Việt
                </option>
                   
              </select>
              <svg
                version="1.1"
                id="Capa_1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                x="0px"
                y="0px"
                width="255px"
                height="255px"
                viewBox="0 0 255 255"
                style="enable-background: new 0 0 255 255"
                xml:space="preserve"
              >
                <g>
                  <g id="arrow-drop-down">
                    <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
                  </g>
                </g>
              </svg>
            </div>
          </a>
        </li>
         
        <li>
          <a class="padding" href="#" data-clear-history-toggle=""
            ><i class="fas fa-history fa-fw"></i> Clear History</a
          >
        </li>
        
      </ul>
    </section>
    
    <section id="footer"><left>
    
    <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0"
        title="Migrate" Alt="web counter" border="0" /></a> <br>
    <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0"
        title="Total CLoud Journey" Alt="web counter" border="0" />

</left>
<left>
    <br>
    <br>
    <b>Last Updated</b><br>
    <i>
        <span id="lastUpdated" style="color:orange;"></span>
    </i>

    <script>
        
        const today = new Date();
        
        const formattedDate = today.toLocaleDateString('en-GB');
        
        document.getElementById('lastUpdated').textContent = formattedDate;
    </script>
</left>
<left>
    <br>
    <br>
    <b> Team </b> <br>

    <i> <a href="https://www.facebook.com/groups/660548818043427" style="color:orange">First Cloud Journey </a> <br>

    </i>
</left>

<script async defer src="https://buttons.github.io/buttons.js"></script></section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='../../../vi/'>Báo cáo thực tập</a> > <a href='../../../vi/5-workshop/'>Workshop</a> > Cấu hình API & Lambda
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
  <div class="wrapper"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav></div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Cấu hình API &amp; Lambda
            </h1>
          

        



	<h4 id="tổng-quan">Tổng quan</h4>
<p>Sau khi triển khai cơ sở hạ tầng, bạn cần cấu hình các tuyến API Gateway và các hàm Lambda để xử lý logic nghiệp vụ. Dự án Thương mại điện tử OJT sử dụng kiến ​​trúc triển khai 2 bước: Cơ sở hạ tầng (CDK) và Mã Lambda (riêng biệt).</p>
<h4 id="kiến-trúc-api">Kiến trúc API</h4>
<pre tabindex="0"><code>Cổng API (API REST)
↓
┌─ ...�
│ 11 Mô-đun Lambda (63 API) │
├─────────────────────────────────────────────────────────────────────┤
│ Auth │Sản phẩm │ Giỏ hàng │ Đơn hàng │Danh mục │ Thương hiệu │
│(4 API) │(12 API) │(6 API) │(9 API) │ (6 API) │ (5 API) │
├───────────┼───────────────────────────────────────────────────────┤
│ Biểu ngữ │ Xếp hạng │ Người dùng │ Hình ảnh │ Sản phẩm │ │
│(7 API) │(3 API) │(3 API) │(1 API) │ Chi tiết │ │
│ │ │ │ │(7 API) │ │
└─ ...
↓ ↓ ↓ ↓
Hình ảnh RDS SQL Server S3
(qua Secrets Quản lý)
</code></pre><h4 id="bước-1-xem-lại-cấu-trúc-dự-án">Bước 1: Xem lại Cấu trúc Dự án</h4>
<p><strong>Cấu trúc Hàm Lambda:</strong></p>
<pre tabindex="0"><code>OJT_lambda/
├── shared/ # Tiện ích dùng chung
│ ├── database.js # Trình trợ giúp kết nối RDS
│ ├── auth.js # Tiện ích JWT
│ └── response.js # Trình định dạng phản hồi API
├── auth/ # Xác thực (4 hàm)
│ ├── login.js # POST /auth/login
│ ├── signup.js # POST /auth/signup
│ ├── logout.js # POST /auth/logout
│ └── me.js # GET /auth/me
├── products/ # Sản phẩm (12 hàm)
│ ├── getProducts.js # GET /products
│ ├── getProductDetail.js # GET /products/detail/{id}
│ ├── createProduct.js # POST /products
│ ├── updateProduct.js # PUT /products/{id}
│ ├── deleteProduct.js # DELETE /products/{id}
│ ├── searchProducts.js # GET /products/search
│ ├── getBestSelling.js # GET /products/best-selling
│ ├── getNewest.js # GET /products/newest
│ └── ...
├── cart/ # Cart (6 chức năng)
├── orders/ # Orders (9 chức năng)
├── categories/ # Categories (6 chức năng)
├── brands/ # Brands (5 chức năng)
├── banners/ # Banners (7 chức năng)
├── ratings/ # Ratings (3 chức năng)
├── users/ # Users (3 chức năng)
├── images/ # Images (1 chức năng)
└── product-details/ # Product Details (7 chức năng)
</code></pre><h4 id="bước-2-cấu-hình-biến-môi-trường-lambda">Bước 2: Cấu hình Biến Môi trường Lambda</h4>
<p><strong>1. Điều hướng đến dự án Lambda</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>cd OJT_lambda
</span></span></code></pre></div><p><strong>2. Sao chép mẫu môi trường</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>sao chép .env.example .env
</span></span></code></pre></div><p><strong>3. Chỉnh sửa tệp .env</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Cấu hình AWS</span>
</span></span><span style="display:flex;"><span>AWS_REGION<span style="color:#f92672">=</span>ap-southeast-1
</span></span><span style="display:flex;"><span>AWS_ACCOUNT_ID<span style="color:#f92672">=</span><span style="color:#ae81ff">123456789012</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Cấu hình cơ sở dữ liệu (từ đầu ra CDK)</span>
</span></span><span style="display:flex;"><span>DB_HOST<span style="color:#f92672">=</span>ojt-database.xxx.ap-southeast-1.rds.amazonaws.com
</span></span><span style="display:flex;"><span>DB_NAME<span style="color:#f92672">=</span>demoaws
</span></span><span style="display:flex;"><span>DB_SECRET_ARN<span style="color:#f92672">=</span>arn:aws:secretsmanager:ap-southeast-1:123456789012:secret:OJT/RDS/Credentials
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Cấu hình JWT</span>
</span></span><span style="display:flex;"><span>JWT_SECRET<span style="color:#f92672">=</span>your-jwt-secret-key
</span></span><span style="display:flex;"><span>JWT_EXPIRES_IN<span style="color:#f92672">=</span>7d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Thùng chứa hình ảnh S3 (từ CDK outputs)</span>
</span></span><span style="display:flex;"><span>S3_IMAGES_BUCKET<span style="color:#f92672">=</span>ojt-ecommerce-images-123456789012
</span></span></code></pre></div><p><strong>4. Lấy giá trị từ đầu ra CDK</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#75715e"># Lấy điểm cuối RDS</span>
</span></span><span style="display:flex;"><span>aws rds describe-db-instances `
</span></span><span style="display:flex;"><span>--db-instance-identifier ojt-database `
</span></span><span style="display:flex;"><span>--query <span style="color:#e6db74">&#39;DBInstances[0].Endpoint.Address&#39;</span> `
</span></span><span style="display:flex;"><span>--output text
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Lấy ARN của Secrets Manager</span>
</span></span><span style="display:flex;"><span>aws secretsmanager list-secrets `
</span></span><span style="display:flex;"><span>--query <span style="color:#e6db74">&#34;SecretList[?contains(Name, &#39;OJT&#39;)].ARN&#34;</span> `
</span></span><span style="display:flex;"><span>--output text
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Lấy tên bucket S3</span>
</span></span><span style="display:flex;"><span>aws s3 ls | Select-String <span style="color:#e6db74">&#34;ojt-ecommerce-images&#34;</span>
</span></span></code></pre></div><h4 id="bước-3-xem-lại-các-điểm-cuối-api">Bước 3: Xem lại các điểm cuối API</h4>
<p><strong>API xác thực (4 điểm cuối):</strong></p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Phương thức</th>
          <th style="text-align: left">Điểm cuối</th>
          <th style="text-align: left">Trình xử lý</th>
          <th style="text-align: left">Mô tả</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">POST</td>
          <td style="text-align: left"><code>/auth/login</code></td>
          <td style="text-align: left">login.js</td>
          <td style="text-align: left">Đăng nhập người dùng</td>
      </tr>
      <tr>
          <td style="text-align: left">POST</td>
          <td style="text-align: left"><code>/auth/signup</code></td>
          <td style="text-align: left">signup.js</td>
          <td style="text-align: left">Đăng ký người dùng</td>
      </tr>
      <tr>
          <td style="text-align: left">POST</td>
          <td style="text-align: left"><code>/auth/logout</code></td>
          <td style="text-align: left">logout.js</td>
          <td style="text-align: left">Đăng xuất người dùng</td>
      </tr>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/auth/me</code></td>
          <td style="text-align: left">me.js</td>
          <td style="text-align: left">Lấy người dùng hiện tại</td>
      </tr>
  </tbody>
</table>
<p><strong>API Sản phẩm (12 điểm cuối):</strong></p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Phương thức</th>
          <th style="text-align: left">Điểm cuối</th>
          <th style="text-align: left">Trình xử lý</th>
          <th style="text-align: left">Mô tả</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/products</code></td>
          <td style="text-align: left">getProducts.js</td>
          <td style="text-align: left">Liệt kê tất cả sản phẩm</td>
      </tr>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/products/detail/{id}</code></td>
          <td style="text-align: left">getProductDetail.js</td>
          <td style="text-align: left">Chi tiết sản phẩm</td>
      </tr>
      <tr>
          <td style="text-align: left">POST</td>
          <td style="text-align: left"><code>/products</code></td>
          <td style="text-align: left">createProduct.js</td>
          <td style="text-align: left">Tạo sản phẩm (Quản trị viên)</td>
      </tr>
      <tr>
          <td style="text-align: left">PUT</td>
          <td style="text-align: left"><code>/products/{id}</code></td>
          <td style="text-align: left">updateProduct.js</td>
          <td style="text-align: left">Cập nhật sản phẩm (Quản trị)</td>
      </tr>
      <tr>
          <td style="text-align: left">XÓA</td>
          <td style="text-align: left"><code>/products/{id}</code></td>
          <td style="text-align: left">deleteProduct.js</td>
          <td style="text-align: left">Xóa sản phẩm (Quản trị)</td>
      </tr>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/products/search</code></td>
          <td style="text-align: left">searchProducts.js</td>
          <td style="text-align: left">Tìm kiếm sản phẩm</td>
      </tr>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/products/best-selling</code></td>
          <td style="text-align: left">getBestSelling.js</td>
          <td style="text-align: left">Sản phẩm bán chạy nhất</td>
      </tr>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/products/newest</code></td>
          <td style="text-align: left">getNewest.js</td>
          <td style="text-align: left">Sản phẩm mới nhất</td>
      </tr>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/products/category/{id}</code></td>
          <td style="text-align: left">getProductsByCategory.js</td>
          <td style="text-align: left">Sản phẩm theo danh mục</td>
      </tr>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/products/brand/{id}</code></td>
          <td style="text-align: left">getProductsByBrand.js</td>
          <td style="text-align: left">Sản phẩm theo thương hiệu</td>
      </tr>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/products/price-range</code></td>
          <td style="text-align: left">getProductsByPriceRange.js</td>
          <td style="text-align: left">Sản phẩm theo giá</td>
      </tr>
  </tbody>
</table>
<p><strong>Ô tôAPI t (6 điểm cuối):</strong></p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Phương thức</th>
          <th style="text-align: left">Điểm cuối</th>
          <th style="text-align: left">Trình xử lý</th>
          <th style="text-align: left">Mô tả</th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>
<p>| POST | <code>/cart</code> | addToCart.js | Thêm vào giỏ hàng |
| GET | <code>/cart/me</code> | getMyCart.js | Lấy giỏ hàng của người dùng |
| PUT | <code>/cart/{id}</code> | updateCartItem.js | Cập nhật mặt hàng trong giỏ hàng |
| DELETE | <code>/cart/{id}</code> | removeCartItem.js | Xóa mặt hàng trong giỏ hàng |
| DELETE | <code>/cart</code> | clearCart.js | Xóa giỏ hàng |
| GET | <code>/cart/count</code> | getCartCount.js | Lấy số lượng giỏ hàng |</p>
<p><strong>API Đơn hàng (9 điểm cuối):</strong></p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Phương thức</th>
          <th style="text-align: left">Điểm cuối</th>
          <th style="text-align: left">Trình xử lý</th>
          <th style="text-align: left">Mô tả</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/orders</code></td>
          <td style="text-align: left">getAllOrders.js</td>
          <td style="text-align: left">Tất cả đơn hàng (Quản trị viên)</td>
      </tr>
      <tr>
          <td style="text-align: left">POST</td>
          <td style="text-align: left"><code>/orders</code></td>
          <td style="text-align: left">createOrder.js</td>
          <td style="text-align: left">Tạo đơn hàng</td>
      </tr>
      <tr>
          <td style="text-align: left">POST</td>
          <td style="text-align: left"><code>/orders/create-cod</code></td>
          <td style="text-align: left">createOrderCOD.js</td>
          <td style="text-align: left">Tạo đơn hàng COD</td>
      </tr>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/orders/{id}/details</code></td>
          <td style="text-align: left">getOrderDetails.js</td>
          <td style="text-align: left">Chi tiết đơn hàng</td>
      </tr>
      <tr>
          <td style="text-align: left">GET</td>
          <td style="text-align: left"><code>/orders/user/{userId}</code></td>
          <td style="text-align: left">getUserOrders.js</td>
          <td style="text-align: left">Đơn hàng của người dùng</td>
      </tr>
      <tr>
          <td style="text-align: left">PATCH</td>
          <td style="text-align: left"><code>/orders/{id}/status</code></td>
          <td style="text-align: left">updateOrderStatus.js</td>
          <td style="text-align: left">Cập nhật trạng thái</td>
      </tr>
      <tr>
          <td style="text-align: left">DELETE</td>
          <td style="text-align: left"><code>/orders/{id}</code></td>
          <td style="text-align: left">cancelOrder.js</td>
          <td style="text-align: left">Hủy đơn hàng</td>
      </tr>
  </tbody>
</table>
<h4 id="bước-4-cài-đặt-các-phụ-thuộc-lambda">Bước 4: Cài đặt các phụ thuộc Lambda</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#75715e"># Cài đặt các phụ thuộc chính</span>
</span></span><span style="display:flex;"><span>cd OJT_lambda
</span></span><span style="display:flex;"><span>npm install
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Cài đặt tất cả các phụ thuộc module</span>
</span></span><span style="display:flex;"><span>npm run install<span style="color:#960050;background-color:#1e0010">:</span>all
</span></span></code></pre></div><p>Lệnh này sẽ cài đặt các phụ thuộc cho:</p>
<ul>
<li><code>shared/</code> - Cơ sở dữ liệu, xác thực, tiện ích phản hồi</li>
<li><code>auth/</code> - bcryptjs, jsonwebtoken</li>
<li><code>products/</code> - Truy vấn cơ sở dữ liệu</li>
<li><code>cart/</code>, <code>orders/</code>, v.v.</li>
</ul>
<h4 id="bước-5-xem-lại-các-tiện-ích-dùng-chung">Bước 5: Xem lại các tiện ích dùng chung</h4>
<p><strong>Trình trợ giúp cơ sở dữ liệu (<code>shared/database.js</code>):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">sql</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;mssql&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">config</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">máy</span> <span style="color:#a6e22e">chủ</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">DB_HOST</span>,
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">cơ</span> <span style="color:#a6e22e">sở</span> <span style="color:#a6e22e">dữ</span> <span style="color:#a6e22e">liệu</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">DB_NAME</span>,
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">người</span> <span style="color:#a6e22e">dùng</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">DB_USERNAME</span>,
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">mật</span> <span style="color:#a6e22e">khẩu</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">DB_PASSWORD</span>,
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">tùy</span> <span style="color:#a6e22e">chọn</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">mã</span> <span style="color:#a6e22e">hóa</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">đúng</span>,
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">trustServerCertificate</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">đúng</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">hàm</span> <span style="color:#66d9ef">async</span> <span style="color:#a6e22e">query</span>(<span style="color:#a6e22e">sqlQuery</span>, <span style="color:#a6e22e">params</span> <span style="color:#f92672">=</span> []) {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">pool</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">sql</span>.<span style="color:#a6e22e">connect</span>(<span style="color:#a6e22e">config</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">pool</span>.<span style="color:#a6e22e">request</span>();
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Thêm tham số
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">params</span>.<span style="color:#a6e22e">forEach</span>((<span style="color:#a6e22e">param</span>, <span style="color:#a6e22e">index</span>) =&gt; {
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">input</span>(<span style="color:#e6db74">`param</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">index</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>, <span style="color:#a6e22e">param</span>);
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">return</span> <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">query</span>(<span style="color:#a6e22e">sqlQuery</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">module</span>.<span style="color:#a6e22e">exports</span> <span style="color:#f92672">=</span> {<span style="color:#a6e22e">query</span>, <span style="color:#a6e22e">sql</span> };
</span></span></code></pre></div><p><strong>Trợ lý xác thực (<code>shared/auth.js</code>):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">jwt</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;jsonwebtoken&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">hàm</span> <span style="color:#a6e22e">generateToken</span>(<span style="color:#a6e22e">người</span> <span style="color:#a6e22e">dùng</span>) {
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">trả</span> <span style="color:#a6e22e">về</span> <span style="color:#a6e22e">jwt</span>.<span style="color:#a6e22e">sign</span>(
</span></span><span style="display:flex;"><span>{<span style="color:#a6e22e">userId</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">UserID</span>, <span style="color:#a6e22e">email</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">Email</span>, <span style="color:#a6e22e">vai</span> <span style="color:#a6e22e">trò</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">Role</span> },
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">JWT_SECRET</span>,
</span></span><span style="display:flex;"><span>{ <span style="color:#a6e22e">expiresIn</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">JWT_EXPIRES_IN</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;7d&#39;</span> }
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">hàm</span> <span style="color:#a6e22e">verifyToken</span>(<span style="color:#a6e22e">mã</span> <span style="color:#a6e22e">thông</span> <span style="color:#a6e22e">báo</span>) {
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">trả</span> <span style="color:#a6e22e">về</span> <span style="color:#a6e22e">jwt</span>.<span style="color:#a6e22e">verify</span>(<span style="color:#a6e22e">mã</span> <span style="color:#a6e22e">thông</span> <span style="color:#a6e22e">báo</span>, <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">JWT_SECRET</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">module</span>.<span style="color:#a6e22e">exports</span> <span style="color:#f92672">=</span> {<span style="color:#a6e22e">generateToken</span>, <span style="color:#a6e22e">verifyToken</span> };
</span></span></code></pre></div><p><strong>Trợ lý phản hồi (<code>shared/response.js</code>):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">hàm</span> <span style="color:#a6e22e">success</span>(<span style="color:#a6e22e">data</span>, <span style="color:#a6e22e">statusCode</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">200</span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">trả</span> <span style="color:#a6e22e">về</span> {
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">statusCode</span>,
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;Content-Type&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;application/json&#39;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;Access-Control-Allow-Origin&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;*&#39;</span>
</span></span><span style="display:flex;"><span>},
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">body</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">data</span>)
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">hàm</span> <span style="color:#a6e22e">error</span>(<span style="color:#a6e22e">message</span>, <span style="color:#a6e22e">statusCode</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">500</span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">trả</span> <span style="color:#a6e22e">về</span> {
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">statusCode</span>,
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;Content-Type&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;application/json&#39;</span>,
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;Access-Control-Allow-Origin&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;*&#39;</span>
</span></span><span style="display:flex;"><span>},
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">body</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>({ <span style="color:#a6e22e">error</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">message</span> })
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">module</span>.<span style="color:#a6e22e">exports</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">success</span>, <span style="color:#a6e22e">error</span> };
</span></span></code></pre></div><h4 id="bước-6-xác-minh-cấu-hình-api-gateway">Bước 6: Xác minh cấu hình API Gateway</h4>
<p><strong>1. Lấy URL API Gateway từ đầu ra CDK</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#75715e"># Lấy URL API Gateway</span>
</span></span><span style="display:flex;"><span>aws cloudformation describe-stacks `
</span></span><span style="display:flex;"><span>--stack-name OJT-ApiStack `
</span></span><span style="display:flex;"><span>--query <span style="color:#e6db74">&#39;Stacks[0].Outputs[?OutputKey==`ApiUrl`].OutputValue&#39;</span> `
</span></span><span style="display:flex;"><span>--output text
</span></span></code></pre></div><p>Đầu ra dự kiến:</p>
<pre tabindex="0"><code>https://xxxxxxxxxx.execute-api.ap-southeast-1.amazonaws.com/prod
</code></pre><p><strong>2. Kiểm tra tài nguyên API Gateway</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#75715e"># Lấy ID API</span>
</span></span><span style="display:flex;"><span>$API_ID = aws apigateway get-rest-apis `
</span></span><span style="display:flex;"><span>--query <span style="color:#e6db74">&#34;items[?contains(name, &#39;OJT&#39;)].id&#34;</span> `
</span></span><span style="display:flex;"><span>--output text
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Liệt kê tài nguyên</span>
</span></span><span style="display:flex;"><span>aws apigateway get-resources --rest-api-id $API_ID
</span></span></code></pre></div><h4 id="bước-7-xác-minh-các-hàm-lambda">Bước 7: Xác minh các hàm Lambda</h4>
<p><strong>1. Liệt kê các hàm Lambda</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>aws lambda list-functions `
</span></span><span style="display:flex;"><span>--query <span style="color:#e6db74">&#34;Functions[?contains(FunctionName, &#39;OJT-Ecommerce&#39;)].FunctionName&#34;</span> `
</span></span><span style="display:flex;"><span>--output table
</span></span></code></pre></div><p>Đầu ra dự kiến:</p>
<pre tabindex="0"><code>OJT-Ecommerce-AuthModule
OJT-Ecommerce-ProductsModule
OJT-Ecommerce-ProductDetailsModule
OJT-Ecommerce-CartModule
OJT-Ecommerce-OrdersModule
OJT-Ecommerce-CategoriesModule
OJT-Ecommerce-BrandsModule
OJT-Ecommerce-BannersModule
OJT-Ecommerce-RatingsModule
OJT-Ecommerce-UsersModule
OJT-Ecommerce-ImagesModule
</code></pre><p><strong>2. Kiểm tra biến môi trường Lambda</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>aws lambda get-function-configuration `
</span></span><span style="display:flex;"><span>--function-name OJT-Ecommerce-AuthModule `
</span></span><span style="display:flex;"><span>--query <span style="color:#e6db74">&#39;Environment.Variables&#39;</span>
</span></span></code></pre></div><h4 id="bước-8-kiểm-tra-các-hàm-lambda-cục-bộ">Bước 8: Kiểm tra các hàm Lambda cục bộ</h4>
<p><strong>1. Kiểm tra Đăng nhập Xác thực</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>cd OJT_lambda
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Trình xử lý đăng nhập kiểm tra</span>
</span></span><span style="display:flex;"><span>node -e <span style="color:#e6db74">&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">const handler = require(&#39;./auth/login.js&#39;).handler;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">const event = {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">body: JSON.stringify({
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">email: &#39;test@test.com&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">password: &#39;Test123!&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">})
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">};
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">handler(event).then(console.log);
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><p><strong>2. Kiểm tra Danh sách Sản phẩm</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#75715e"># Kiểm tra trình xử lý lấy sản phẩm</span>
</span></span><span style="display:flex;"><span>node -e <span style="color:#e6db74">&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">const handler = require(&#39;./products/getProducts.js&#39;).handler;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">const event = {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">queryStringParameters: { page: &#39;1&#39;, limit: &#39;10&#39; }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">};
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">handler(event).then(console.log);
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><h4 id="bước-9-xây-dựng-các-gói-lambda">Bước 9: Xây dựng các Gói Lambda</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#75715e"># Xây dựng tất cả Lambdmột gói</span>
</span></span><span style="display:flex;"><span>npm run build
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Hoặc xây dựng mô-đun cụ thể</span>
</span></span><span style="display:flex;"><span>npm run build<span style="color:#960050;background-color:#1e0010">:</span>auth
</span></span><span style="display:flex;"><span>npm run build<span style="color:#960050;background-color:#1e0010">:</span>products
</span></span></code></pre></div><p>Lệnh này tạo các tệp ZIP trong thư mục <code>build/</code>:</p>
<pre tabindex="0"><code>build/
├── auth.zip
├── products.zip
├── product-details.zip
├── cart.zip
├── orders.zip
├── categories.zip
├── brands.zip
├── banners.zip
├── ratings.zip
├── users.zip
└── images.zip
</code></pre><h4 id="danh-sách-kiểm-tra-cấu-hình">Danh sách kiểm tra cấu hình</h4>
<ul>
<li><input disabled="" type="checkbox"> Xem xét cấu trúc dự án Lambda</li>
<li><input disabled="" type="checkbox"> Biến môi trường được cấu hình trong <code>.env</code></li>
<li><input disabled="" type="checkbox"> Chi tiết kết nối cơ sở dữ liệu được lấy từ đầu ra CDK</li>
<li><input disabled="" type="checkbox"> Cấu hình bí mật JWT</li>
<li><input disabled="" type="checkbox"> Cấu hình tên bucket S3</li>
<li><input disabled="" type="checkbox"> Các dependency đã được cài đặt (<code>npm install</code> + <code>npm run install:all</code>)</li>
<li><input disabled="" type="checkbox"> Các tiện ích dùng chung đã được xem xét (cơ sở dữ liệu, xác thực, phản hồi)</li>
<li><input disabled="" type="checkbox"> Đã lấy URL API Gateway</li>
<li><input disabled="" type="checkbox"> Liệt kê và xác minh các hàm Lambda</li>
<li><input disabled="" type="checkbox"> Các bài kiểm tra cục bộ đã đạt yêu cầu</li>
<li><input disabled="" type="checkbox"> Các gói Lambda đã được xây dựng (<code>npm run build</code>)</li>
</ul>
<h4 id="tóm-tắt-api">Tóm tắt API</h4>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Mô-đun</th>
          <th style="text-align: left">Hàm</th>
          <th style="text-align: left">Điểm cuối</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">Xác thực</td>
          <td style="text-align: left">4</td>
          <td style="text-align: left">đăng nhập, đăng ký, đăng xuất, tôi</td>
      </tr>
      <tr>
          <td style="text-align: left">Sản phẩm</td>
          <td style="text-align: left">12</td>
          <td style="text-align: left">CRUD + tìm kiếm, lọc, bán chạy nhất, mới nhất</td>
      </tr>
      <tr>
          <td style="text-align: left">Chi tiết sản phẩm</td>
          <td style="text-align: left">7</td>
          <td style="text-align: left">CRUD + tải lên hình ảnh</td>
      </tr>
      <tr>
          <td style="text-align: left">Giỏ hàng</td>
          <td style="text-align: left">6</td>
          <td style="text-align: left">thêm, lấy, cập nhật, xóa, xóa, đếm</td>
      </tr>
      <tr>
          <td style="text-align: left">Đơn hàng</td>
          <td style="text-align: left">9</td>
          <td style="text-align: left">CRUD + COD, trạng thái, khoảng thời gian</td>
      </tr>
      <tr>
          <td style="text-align: left">Danh mục</td>
          <td style="text-align: left">6</td>
          <td style="text-align: left">CRUD + tìm kiếm</td>
      </tr>
      <tr>
          <td style="text-align: left">Thương hiệu</td>
          <td style="text-align: left">5</td>
          <td style="text-align: left">CRUD</td>
      </tr>
      <tr>
          <td style="text-align: left">Biểu ngữ</td>
          <td style="text-align: left">7</td>
          <td style="text-align: left">CRUD + chuyển đổi</td>
      </tr>
      <tr>
          <td style="text-align: left">Xếp hạng</td>
          <td style="text-align: left">3</td>
          <td style="text-align: left">lấy, thống kê, tạo</td>
      </tr>
      <tr>
          <td style="text-align: left">Người dùng</td>
          <td style="text-align: left">3</td>
          <td style="text-align: left">lấyTất cả, lấyTheoId, cập nhậtHồ sơ</td>
      </tr>
      <tr>
          <td style="text-align: left">Hình ảnh</td>
          <td style="text-align: left">1</td>
          <td style="text-align: left">tải lên</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>Tổng cộng</strong></td>
          <td style="text-align: left"><strong>63</strong></td>
          <td style="text-align: left"></td>
      </tr>
  </tbody>
</table>
<h4 id="các-bước-tiếp-theo">Các bước tiếp theo</h4>
<p>Sau khi cấu hình hoàn tất, hãy chuyển đến [Triển khai Backend] để triển khai mã Lambda của bạn lên AWS.</p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="../../../vi/5-workshop/5.04-configure-stacks/" title="Cấu hình các Infrastructure Stack"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../../../vi/5-workshop/5.06-deploy-backend/" title="Triển khai Backend Services" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../../js/clipboard.min.js?1765314152"></script>
    <script src="../../../js/perfect-scrollbar.min.js?1765314152"></script>
    <script src="../../../js/perfect-scrollbar.jquery.min.js?1765314152"></script>
    <script src="../../../js/jquery.sticky.js?1765314152"></script>
    <script src="../../../js/featherlight.min.js?1765314152"></script>
    <script src="../../../js/highlight.pack.js?1765314152"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../../../js/modernizr.custom-3.6.0.js?1765314152"></script>
    <script src="../../../js/learn.js?1765314152"></script>
    <script src="../../../js/hugo-learn.js?1765314152"></script>

    <link href="../../../mermaid/mermaid.css?1765314152" rel="stylesheet" />
    <script src="../../../mermaid/mermaid.js?1765314152"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function (i, s, o, g, r, a, m) {
    i["GoogleAnalyticsObject"] = r;
    ((i[r] =
      i[r] ||
      function () {
        (i[r].q = i[r].q || []).push(arguments);
      }),
      (i[r].l = 1 * new Date()));
    ((a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]));
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m);
  })(
    window,
    document,
    "script",
    "https://www.google-analytics.com/analytics.js",
    "ga",
  );

  ga("create", "UA-158079754-2", "auto");
  ga("send", "pageview");
</script>

  </body>
</html>
